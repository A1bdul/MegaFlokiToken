$("a[href*=#]:not([href=#])").click((function(){if(location.pathname.replace(/^\//,"")==this.pathname.replace(/^\//,"")&&location.hostname==this.hostname){var t=$(this.hash);if((t=t.length?t:$("[name="+this.hash.slice(1)+"]")).length)return $("html, body").animate({scrollTop:t.offset().top},500),!1}}));var lastId,topMenu=$("nav"),topMenuHeight=topMenu.outerHeight()+15,menuItems=topMenu.find("a.smooth"),scrollItems=menuItems.map((function(){var t=$($(this).attr("href"));if(t.length)return t}));$(window).on("scroll",(function(){var t=$(this).scrollTop()+topMenuHeight,e=scrollItems.map((function(){if($(this).offset().top<t)return this})),n=(e=e[e.length-1])&&e.length?e[0].id:"";lastId!==n&&(lastId=n,menuItems.parent().removeClass("active").end().filter("[href=#"+n+"]").parent().addClass("active"))}));